{"mappings":"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","sources":["node_modules/@swc/helpers/lib/_define_property.js","node_modules/@swc/helpers/lib/_object_spread.js","src/js/home-favourites-read.js","src/favourite.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _defineProperty;\nfunction _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _objectSpread;\nvar _defineProperty = _interopRequireDefault(require(\"./_define_property\"));\nfunction _objectSpread(target) {\n    for(var i = 1; i < arguments.length; i++){\n        var source = arguments[i] != null ? arguments[i] : {};\n        var ownKeys = Object.keys(source);\n        if (typeof Object.getOwnPropertySymbols === 'function') {\n            ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym) {\n                return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n            }));\n        }\n        ownKeys.forEach(function(key) {\n            (0, _defineProperty).default(target, key, source[key]);\n        });\n    }\n    return target;\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","import { onGetLocaleStorageData, refs } from './refs';\n\nrefs.newsGallery.addEventListener('click', onReadMoreClick);\n\n//============== Функция обработчик по клику на ссылку ReadMore:\nexport function onReadMoreClick(event) {\n  event.preventDefault();\n  if (!event.target.classList.contains('markup-unit__global-link')) return;\n\n  const clickDate = receiveDate(); // получаем дату клика в виде 20/02/2023\n  const parsedCardData = makeParseJson(event.target.dataset.favorite); // получаем объект данных с карточки которая находится на странице\n  const dataFromLocaleStorage = onGetLocaleStorageData(refs.READ_KEY); // получаем массив объектов прочитанных новостей из Локального Хранилища\n\n  if (!dataFromLocaleStorage) {\n    onSetLocaleStorageData(refs.READ_KEY, [{...parsedCardData, viewDate: clickDate}]);\n    return;\n  }\n\n  if (!dataFromLocaleStorage.some(news => news.link === parsedCardData.link)) {\n    onSetLocaleStorageData(refs.READ_KEY, [\n      ...dataFromLocaleStorage,\n      {...parsedCardData, viewDate: clickDate}\n    ]);\n    return;\n  }\n}\n\n//============ Логика страницы Index, действие с Фавориты:\nrefs.newsGallery.addEventListener('click', onAddRemoveLocaleStorageData); // вешаем слушателя событий на контейнер с новостями\n\n//=========== Функция-обработчик Клика на кнопку добавить/убрать в/из Фавориты:\nfunction onAddRemoveLocaleStorageData(event) {\n  if (!event.target.hasAttribute('data-info')) return; // проверка туда ли тырнули\n\n  const parsedCardData = makeParseJson(event.target.dataset.favorite); // получаем объект данных с карточки которая находится на странице\n  const dataFromLocaleStorage = onGetLocaleStorageData(refs.FAVORITES_KEY); // получаем массив объектов из Локального Хранилища\n\n  if (!dataFromLocaleStorage) {\n    onSetLocaleStorageData(refs.FAVORITES_KEY, [parsedCardData]);\n    changeButton(event.target, 'add')\n    return;\n  }\n\n  if (!dataFromLocaleStorage.some(news => news.link === parsedCardData.link)) {\n    onSetLocaleStorageData(refs.FAVORITES_KEY, [\n      ...dataFromLocaleStorage,\n      parsedCardData,\n    ]);\n    changeButton(event.target, 'add');\n  } else {\n    onSetLocaleStorageData(\n      refs.FAVORITES_KEY,\n      dataFromLocaleStorage.filter(news => news.link !== parsedCardData.link)\n    );\n    changeButton(event.target, 'remove');\n    onGetLocaleStorageData(refs.FAVORITES_KEY).length === 0 ? localStorage.removeItem(refs.FAVORITES_KEY) : null;\n  }\n}\n\n\n//========== Функция парсинга данных из JSON файла:\nexport function makeParseJson(stringData) {\n  try {\n    return JSON.parse(stringData);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n//========== Функкция Добавления Данных в Locale Storage:\nexport function onSetLocaleStorageData(key, data) {\n  try {\n    localStorage.setItem(key, JSON.stringify(data));\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n//========== Функция получения даты в формате 20/02/2021\nexport function receiveDate() {\n  const date = new Date();\n  const day = addLeadingZero(date.getDate());\n  const month = addLeadingZero(date.getMonth() + 1);\n  const year = addLeadingZero(date.getFullYear());\n  return `${day}/${month}/${year}`;\n}\nexport function addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n\nfunction changeButton(eTarget, action) {\n  if (action === 'add') {\n    eTarget.firstElementChild.textContent = 'Remove from Favourites';\n    eTarget.firstElementChild.setAttribute('style', 'pointer-events: none');\n    eTarget.lastElementChild.classList.replace(\n      'markup-unit__favorite-icon',\n      'markup-unit__favorite-icon--active'\n    );\n    eTarget.lastElementChild.setAttribute('style', 'pointer-events: none');\n  }\n\n  if (action === 'remove') {\n    eTarget.firstElementChild.textContent = 'Add to Favourites';\n    eTarget.firstElementChild.setAttribute('style', 'pointer-events: none');\n    eTarget.lastElementChild.classList.replace(\n      'markup-unit__favorite-icon--active',\n      'markup-unit__favorite-icon'\n    );\n    eTarget.lastElementChild.setAttribute('style', 'pointer-events: none');\n  }\n}\n","import { receiveDate, addLeadingZero, makeParseJson, onSetLocaleStorageData, onReadMoreClick } from './js/home-favourites-read';\nimport { refs, getNoFound, onGetLocaleStorageData } from './js/refs';\nimport './js/mobile_menu';\n// import { onInputSubmit } from './js/themeSwitcher';\n// export const formEl = document.querySelector('.toggle-mode');\n// formEl.addEventListener('submit', onInputSubmit);\n\nonOpenFavorites(refs.FAVORITES_KEY);\n\n//=============== Функция при открытии страныцы \"Фавориты\":\nfunction onOpenFavorites(key) {\n  const dataFromLocaleStorage = onGetLocaleStorageData(key);\n  const currentRead = onGetLocaleStorageData(refs.READ_KEY);\n\n  if (!dataFromLocaleStorage || dataFromLocaleStorage.length === 0) {\n    getNoFound(refs.favouriteGallery);\n    return;\n  }\n\n  onCreateMurkup(dataFromLocaleStorage, currentRead);\n}\n\n//============= Функция удаления элементов из ДОМ:\nfunction onRemoveElement(element) {\n  element.remove();\n}\n//============= Функция-обработчик удаления из Фаворитов:\nfunction onRemoveFromFavorites(event) {\n  if (!event.target.hasAttribute('data-info')) return;\n\n  const card = event.target.closest('.markup-unit');\n\n  const cardIDLink = event.target.dataset.id; // получаем ID карточки в виде линка на первоисточник\n\n  const dataFromLocaleStorage = onGetLocaleStorageData(refs.FAVORITES_KEY); // получаем массив из Локального хранилища\n\n  if (!dataFromLocaleStorage) {\n    return;\n  }\n\n  const index = dataFromLocaleStorage.find((card, index) => {\n    // получаем индекс нужной карточки\n    if (card.link === cardIDLink) {\n      return index;\n    }\n  });\n\n  dataFromLocaleStorage.splice(index, 1); // удаляем карточку по индексу\n\n  if (dataFromLocaleStorage.length === 0) {\n    localStorage.removeItem(refs.FAVORITES_KEY);\n    onRemoveElement(card);\n    return;\n  }\n\n  onSetLocaleStorageData(refs.FAVORITES_KEY, dataFromLocaleStorage); // сетаем в локальное хранилище модифицированный массив\n\n  onRemoveElement(card);\n}\n\n//============= Функция для рендера страницы:\nfunction onCreateMurkup(arrayOfObjects, read) {\n  const favoritesMurkup = arrayOfObjects\n    .map(newsObject => {\n      // перебираем массив из Локального хранилища и создаем разметку для карточки\n      const { title, category, date, link, description, imageURL } = newsObject;\n      const favorite = JSON.stringify(newsObject);\n\n      return `<li class=\"markup-unit markup-unit__read\" name=\"card\">\n    <p class=\"markup-unit__section\">${category}</p>\n    <div class=\"markup-unit__image-wrapper\">\n    <img \n        class=\"markup-unit__card-image\" \n        src=\"${imageURL}\" \n        alt=\"placeholder\"\n        />\n        ${read?.some(readNews => readNews.link === link)\n              ? `<p class=\"markup-unit__already-read\">\n                  Already read\n                  <svg class=\"markup-unit__icon-check\" width=\"18\" height=\"18\" viewBox=\"0 0 37 32\">\n                    <path stroke=\"#00DD73\" stroke-linejoin=\"miter\" stroke-linecap=\"square\" stroke-miterlimit=\"4\" stroke-width=\"2.2857\" d=\"M28.779 6.389c-0.288 0.009-0.546 0.131-0.732 0.323l-16.313 16.313-6.713-6.713c-0.195-0.209-0.473-0.339-0.78-0.339-0.589 0-1.067 0.478-1.067 1.067 0 0.308 0.13 0.585 0.339 0.78l0.001 0.001 7.467 7.467c0.193 0.193 0.459 0.312 0.754 0.312s0.561-0.119 0.754-0.312v0l17.067-17.067c0.199-0.194 0.323-0.465 0.323-0.765 0-0.589-0.478-1.067-1.067-1.067-0.011 0-0.022 0-0.033 0l0.002-0z\"></path>\n                  </svg>\n            </p>`\n              : ''\n      }\n    <button \n        class=\"markup-unit__add-favorite js-fbutton js-favorites\" \n        type=\"button\" \n        data-info\n        data-favorite='${favorite}'\n        data-id='${link}'\n      >\n      <p \n        class=\"markup-unit__favorite-text js-fbutton\"\n        data-favorite='${favorite}'\n        style=\"pointer-events: none;\"\n      >\n      ${\n        arrayOfObjects?.some(favouriteNews => favouriteNews.link === link)\n          ? 'Remove from Favourites'\n          : 'Add to Favourite'\n      }\n      </p>\n      <svg \n          data-favorite='${favorite}'  \n          class=\"${\n            arrayOfObjects?.some(\n              favouriteNews => favouriteNews.link === link\n            )\n              ? 'markup-unit__favorite-icon--active js-fbutton'\n              : 'markup-unit__favorite-icon'\n          }\" \n          width=\"15\" \n          height=\"15\" \n          viewBox=\"0 0 37 32\"\n          style=\"pointer-events: none;\"\n        >\n        <path style=\"stroke: var(--color1, #4440f7)\" stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"4\" stroke-width=\"2.2857\" d=\"M10.666 2.286c-4.207 0-7.619 3.377-7.619 7.543 0 3.363 1.333 11.345 14.458 19.413 0.235 0.143 0.505 0.219 0.78 0.219s0.545-0.076 0.78-0.219c13.125-8.069 14.458-16.050 14.458-19.413 0-4.166-3.412-7.543-7.619-7.543s-7.619 4.571-7.619 4.571-3.412-4.571-7.619-4.571z\"></path>\n      </svg>\n    </button>\n    </div>\n    <a class=\"markup-unit__global-link\"\n      href=\"${link}\" \n      name=\"read_more\"\n      target=\"_blank\"\n      data-favorite='${favorite}'\n    >\n    <div class=\"markup-unit__details\" style=\"pointer-events:none;\">\n      <div class=\"markup-unit__subdetails\" style=\"pointer-events:none;\">\n       <h2 class=\"markup-unit__card-header\" name=\"card_header\" style=\"pointer-events:none;\">\n        ${title}\n    </h2>\n    <p class=\"markup-unit__card-text\" name=\"card_text\" style=\"pointer-events:none;\">\n        ${description}\n    </p>\n        <div class=\"markup-unit__card-footer\" style=\"pointer-events:none;\">\n          <p class=\"markup-unit__card-date\" style=\"pointer-events:none;\">${date}</p>\n          <p \n            class=\"markup-unit__read-more\" style=\"pointer-events:none;\"\n          >\n            Read more\n          </p>\n        </div>\n      </div>\n    </div>\n  </a>\n    </li>`;\n    })\n    .join(' ');\n\n  return (refs.favouriteGallery.innerHTML = favoritesMurkup);\n}\n\n\nrefs.favouriteGallery.addEventListener('click', onRemoveFromFavorites);\nrefs.favouriteGallery.addEventListener('click', onReadMoreClick);\n"],"names":["Object","defineProperty","module","exports","value","default","obj","key","enumerable","configurable","writable","$9eddae5a012cde57$exports","target","i","arguments","length","source","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","forEach","$9eddae5a012cde57$var$_defineProperty","parcelRequire","__esModule","$dc8c4865b6888e7f$export$cd221eff0bf2855a","event","preventDefault","classList","contains","date","day","month","year","clickDate","Date","$dc8c4865b6888e7f$export$b69ee541cb46e797","getDate","getMonth","getFullYear","parsedCardData","$dc8c4865b6888e7f$export$c614af795629961e","dataset","favorite","dataFromLocaleStorage","$4Nugj","onGetLocaleStorageData","refs","READ_KEY","some","news","link","$dc8c4865b6888e7f$export$87545ee602204a13","$parcel$interopDefault","$8nrFW","viewDate","stringData","JSON","parse","error","console","log","data","localStorage","setItem","stringify","String","padStart","$dc8c4865b6888e7f$var$changeButton","eTarget","action","firstElementChild","textContent","setAttribute","lastElementChild","replace","newsGallery","addEventListener","hasAttribute","FAVORITES_KEY","removeItem","$fe988d6f732edd76$var$onRemoveElement","element","remove","currentRead","getNoFound","favouriteGallery","arrayOfObjects","read","favoritesMurkup","map","newsObject","title","category","description","imageURL","readNews","favouriteNews","join","innerHTML","$fe988d6f732edd76$var$onOpenFavorites","card1","closest","cardIDLink","id","index1","find","card","index","splice"],"version":3,"file":"favourite.359ad47e.js.map"}