{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,S,aAuB6B,SAApBC,EAAgBC,GACvBA,EAAQC,Q,YAdwB,SAATC,GACvB,IAAMC,GAAwB,EAAAC,EAAAC,wBAAuBH,GAC/CI,GAAc,EAAAF,EAAAC,wBAAuBD,EAAAG,KAAKC,UAEhD,IAAKL,GAA0D,IAAjCA,EAAsBM,OAElD,YADA,EAAAL,EAAAM,YAAWN,EAAAG,KAAKI,kBA8CIC,EA1CPT,EA0CuBU,EA1CAP,EA2ChCQ,EAAkBF,EACrBG,KAAI,SAAAC,GAEH,IAAQC,EAAuDD,EAAvDC,MAAOC,EAAgDF,EAAhDE,SAAUC,EAAsCH,EAAtCG,KAAMC,EAAgCJ,EAAhCI,KAAMC,EAA0BL,EAA1BK,YAAaC,EAAaN,EAAbM,SAC5CC,EAAWC,KAAKC,UAAUT,GAEhC,MAAO,+FAKEU,OAJuBR,EAAS,0HAOrCQ,OAHKJ,EAAS,uDAgBCI,QAbfb,aAAA,EAAAA,EAAMc,MAAK,SAAAC,G,OAAYA,EAASR,OAASA,C,KAClC,quBAMD,GACT,2JAMYM,OADMH,EAAS,wBAKTG,OAJNN,EAAK,2GAQhBM,OAJiBH,EAAS,8DAUPG,QANnBd,aAAA,EAAAA,EAAgBe,MAAK,SAAAE,G,OAAiBA,EAAcT,OAASA,C,KACzD,yBACA,oBACL,wDAKKM,OAFeH,EAAS,2BAkBtBG,QAhBFd,aAAA,EAAAA,EAAgBe,MACd,SAAAE,G,OAAiBA,EAAcT,OAASA,C,KAEtC,gDACA,6BACL,4oBAcYM,OAHTN,EAAK,6EAQTM,OALaH,EAAS,oQAQtBG,OAHAT,EAAM,+GAM2DS,OAHjEL,EAAY,sKAG0DK,OAALP,EAAK,gN,IAY3EW,KAAK,KAEA1B,EAAAG,KAAKI,iBAAiBoB,UAAYjB,EAzFnB,IAADF,EAAgBC,EAChCC,C,CAvDRkB,CAAgB5B,EAAAG,KAAK0B,eAmJrB7B,EAAAG,KAAKI,iBAAiBuB,iBAAiB,SA/HH,SAALC,GAC7B,GAAKA,EAAMC,OAAOC,aAAa,aAA/B,CAEA,IAAMC,EAAOH,EAAMC,OAAOG,QAAQ,gBAE5BC,EAAaL,EAAMC,OAAOK,QAAQC,GAElCvC,GAAwB,EAAAC,EAAAC,wBAAuBD,EAAAG,KAAK0B,eAEvB,GAA9B9B,EAA8B,CAInC,IAAMwC,EAAQxC,EAAsByC,MAAK,SAACC,EAAMC,GAElB,GAAxBD,EAAKzB,OAASoB,EAChB,OAAOM,C,IAMa,GAFxB3C,EAAsB4C,OAAOJ,EAAO,GAEC,IAAjCxC,EAAsBM,OAGxB,OAFAuC,aAAaC,WAAW7C,EAAAG,KAAK0B,oBAC7BlC,EAAgBuC,IAIlB,EAAAzC,EAAAqD,wBAAuB9C,EAAAG,KAAK0B,cAAe9B,GAEIJ,EAA/BuC,EApBd,CAT2C,C,IA+H/ClC,EAAAG,KAAKI,iBAAiBuB,iBAAiB,QAASrC,EAAAsD,gB","sources":["src/favourite.js"],"sourcesContent":["import { receiveDate, addLeadingZero, makeParseJson, onSetLocaleStorageData, onReadMoreClick } from './js/home-favourites-read';\nimport { refs, getNoFound, onGetLocaleStorageData } from './js/refs';\nimport './js/mobile_menu';\n// import { onInputSubmit } from './js/themeSwitcher';\n// export const formEl = document.querySelector('.toggle-mode');\n// formEl.addEventListener('submit', onInputSubmit);\n\nonOpenFavorites(refs.FAVORITES_KEY);\n\n//=============== Функция при открытии страныцы \"Фавориты\":\nfunction onOpenFavorites(key) {\n  const dataFromLocaleStorage = onGetLocaleStorageData(key);\n  const currentRead = onGetLocaleStorageData(refs.READ_KEY);\n\n  if (!dataFromLocaleStorage || dataFromLocaleStorage.length === 0) {\n    getNoFound(refs.favouriteGallery);\n    return;\n  }\n\n  onCreateMurkup(dataFromLocaleStorage, currentRead);\n}\n\n//============= Функция удаления элементов из ДОМ:\nfunction onRemoveElement(element) {\n  element.remove();\n}\n//============= Функция-обработчик удаления из Фаворитов:\nfunction onRemoveFromFavorites(event) {\n  if (!event.target.hasAttribute('data-info')) return;\n\n  const card = event.target.closest('.markup-unit');\n\n  const cardIDLink = event.target.dataset.id; // получаем ID карточки в виде линка на первоисточник\n\n  const dataFromLocaleStorage = onGetLocaleStorageData(refs.FAVORITES_KEY); // получаем массив из Локального хранилища\n\n  if (!dataFromLocaleStorage) {\n    return;\n  }\n\n  const index = dataFromLocaleStorage.find((card, index) => {\n    // получаем индекс нужной карточки\n    if (card.link === cardIDLink) {\n      return index;\n    }\n  });\n\n  dataFromLocaleStorage.splice(index, 1); // удаляем карточку по индексу\n\n  if (dataFromLocaleStorage.length === 0) {\n    localStorage.removeItem(refs.FAVORITES_KEY);\n    onRemoveElement(card);\n    return;\n  }\n\n  onSetLocaleStorageData(refs.FAVORITES_KEY, dataFromLocaleStorage); // сетаем в локальное хранилище модифицированный массив\n\n  onRemoveElement(card);\n}\n\n//============= Функция для рендера страницы:\nfunction onCreateMurkup(arrayOfObjects, read) {\n  const favoritesMurkup = arrayOfObjects\n    .map(newsObject => {\n      // перебираем массив из Локального хранилища и создаем разметку для карточки\n      const { title, category, date, link, description, imageURL } = newsObject;\n      const favorite = JSON.stringify(newsObject);\n\n      return `<li class=\"markup-unit markup-unit__read\" name=\"card\">\n    <p class=\"markup-unit__section\">${category}</p>\n    <div class=\"markup-unit__image-wrapper\">\n    <img \n        class=\"markup-unit__card-image\" \n        src=\"${imageURL}\" \n        alt=\"placeholder\"\n        />\n        ${read?.some(readNews => readNews.link === link)\n              ? `<p class=\"markup-unit__already-read\">\n                  Already read\n                  <svg class=\"markup-unit__icon-check\" width=\"18\" height=\"18\" viewBox=\"0 0 37 32\">\n                    <path stroke=\"#00DD73\" stroke-linejoin=\"miter\" stroke-linecap=\"square\" stroke-miterlimit=\"4\" stroke-width=\"2.2857\" d=\"M28.779 6.389c-0.288 0.009-0.546 0.131-0.732 0.323l-16.313 16.313-6.713-6.713c-0.195-0.209-0.473-0.339-0.78-0.339-0.589 0-1.067 0.478-1.067 1.067 0 0.308 0.13 0.585 0.339 0.78l0.001 0.001 7.467 7.467c0.193 0.193 0.459 0.312 0.754 0.312s0.561-0.119 0.754-0.312v0l17.067-17.067c0.199-0.194 0.323-0.465 0.323-0.765 0-0.589-0.478-1.067-1.067-1.067-0.011 0-0.022 0-0.033 0l0.002-0z\"></path>\n                  </svg>\n            </p>`\n              : ''\n      }\n    <button \n        class=\"markup-unit__add-favorite js-fbutton js-favorites\" \n        type=\"button\" \n        data-info\n        data-favorite='${favorite}'\n        data-id='${link}'\n      >\n      <p \n        class=\"markup-unit__favorite-text js-fbutton\"\n        data-favorite='${favorite}'\n        style=\"pointer-events: none;\"\n      >\n      ${\n        arrayOfObjects?.some(favouriteNews => favouriteNews.link === link)\n          ? 'Remove from Favourites'\n          : 'Add to Favourites'\n      }\n      </p>\n      <svg \n          data-favorite='${favorite}'  \n          class=\"${\n            arrayOfObjects?.some(\n              favouriteNews => favouriteNews.link === link\n            )\n              ? 'markup-unit__favorite-icon--active js-fbutton'\n              : 'markup-unit__favorite-icon'\n          }\" \n          width=\"15\" \n          height=\"15\" \n          viewBox=\"0 0 37 32\"\n          style=\"pointer-events: none;\"\n        >\n        <path style=\"stroke: var(--color1, #4440f7)\" stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"4\" stroke-width=\"2.2857\" d=\"M10.666 2.286c-4.207 0-7.619 3.377-7.619 7.543 0 3.363 1.333 11.345 14.458 19.413 0.235 0.143 0.505 0.219 0.78 0.219s0.545-0.076 0.78-0.219c13.125-8.069 14.458-16.050 14.458-19.413 0-4.166-3.412-7.543-7.619-7.543s-7.619 4.571-7.619 4.571-3.412-4.571-7.619-4.571z\"></path>\n      </svg>\n    </button>\n    </div>\n    <a class=\"markup-unit__global-link\"\n      href=\"${link}\" \n      name=\"read_more\"\n      target=\"_blank\"\n      data-favorite='${favorite}'\n    >\n    <div class=\"markup-unit__details\" style=\"pointer-events:none;\">\n      <div class=\"markup-unit__subdetails\" style=\"pointer-events:none;\">\n       <h2 class=\"markup-unit__card-header\" name=\"card_header\" style=\"pointer-events:none;\">\n        ${title}\n    </h2>\n    <p class=\"markup-unit__card-text\" name=\"card_text\" style=\"pointer-events:none;\">\n        ${description}\n    </p>\n        <div class=\"markup-unit__card-footer\" style=\"pointer-events:none;\">\n          <p class=\"markup-unit__card-date\" style=\"pointer-events:none;\">${date}</p>\n          <p \n            class=\"markup-unit__read-more\" style=\"pointer-events:none;\"\n          >\n            Read more\n          </p>\n        </div>\n      </div>\n    </div>\n  </a>\n    </li>`;\n    })\n    .join(' ');\n\n  return (refs.favouriteGallery.innerHTML = favoritesMurkup);\n}\n\n\nrefs.favouriteGallery.addEventListener('click', onRemoveFromFavorites);\nrefs.favouriteGallery.addEventListener('click', onReadMoreClick);\n"],"names":["$iVYfi","parcelRequire","$fe988d6f732edd76$var$onRemoveElement","element","remove","key","dataFromLocaleStorage","$4Nugj","onGetLocaleStorageData","currentRead","refs","READ_KEY","length","getNoFound","favouriteGallery","arrayOfObjects","read","favoritesMurkup","map","newsObject","title","category","date","link","description","imageURL","favorite","JSON","stringify","concat","some","readNews","favouriteNews","join","innerHTML","$fe988d6f732edd76$var$onOpenFavorites","FAVORITES_KEY","addEventListener","event","target","hasAttribute","card1","closest","cardIDLink","dataset","id","index1","find","card","index","splice","localStorage","removeItem","onSetLocaleStorageData","onReadMoreClick"],"version":3,"file":"favourite.5debecb3.js.map"}